#region Gnus
//$color 14

class AugurSelected : Inventory { Default { Inventory.MaxAmount 1; } }
class AugurZoomed : Inventory { Default { Inventory.MaxAmount 1; } }	//Could use a variable, but it must be accessed from elsewhere either.

//Hexen version.
class AugurHexen : RandomSpawner replaces MWeapLightning
{
	Default
	{
		DropItem "Augur";
	}
}

//Heretic version.
class AugurHeretic : RandomSpawner replaces Skullrod
{
	Default
	{
		DropItem "Augur";
	}
}

#include "zscript/guns/projectile/Augur.txt"

class AugurMag : Inventory { Default { Inventory.MaxAmount 3; } }
class AugurMag2 : IronblastMag {}

class Augur : GuncasterWeapon 
{
	Default
	{
		Inventory.PickupMessage "$GOTAUGUR";
		//Obituary "$KILLAUGUR";
		Weapon.UpSound "Augur/Up";
		Weapon.SelectionOrder 5;
		Weapon.AmmoGive 2;
		Weapon.AmmoType "AugurAmmo";
		Weapon.AmmoUse 1;
		Weapon.SlotNumber 6;
		Weapon.BobStyle 'InverseSmooth';
		Weapon.BobSpeed 1.2;
		Weapon.BobRangeY 0.8;
		Weapon.BobRangeX 1.0;
		GuncasterWeapon.twoHandedWeapon TRUE;
		+WEAPON.NOALERT
	}
	
	//Strat drop.
	override void PostBeginPlay ()
	{
		if(!bDROPPED && random(0,20) == 0)
		{
			A_DropItem("AugurStratGiver",-1,256);
		}
		Super.PostBeginPlay ();
		Return;
	}
	
	//Hexen handling.
	override Void AttachToOwner (actor user) {
		if(gameinfo.gametype == Game_HEXEN) {
			AmmoGive1 = 60;
			AmmoType1 = "GreenMana";
			AmmoUse1 = 20;
		}
		Super.AttachToOwner(user);
	}
	
	int GunzerkShot; //So the gun won't change the frames mid-through a firing anim.
	int GunzerkShot2;
	
	bool ZoomFired;
	
	double GunzX; //A lil' positioning modifier when the gunzerk is on.
	double GunzY;

	States
	{
	Spawn:
		JEFG X -1;
		Stop;
	
	SelectStuff:
		TNT1 A 0 {
			//A_Overlay(99,"Debug");
			invoker.GunzerkShot = 0;
			invoker.GunzerkShot2 = 0;
			invoker.ZoomFired = 0;
			A_TakeInventory("AugurZoomed",1);
			A_SetCrosshair(60);
			A_GiveInventory("AugurSelected",1);
			ACS_NamedExecuteAlways("SbarinfoFix",0,0,1,2);
		}
		Goto SelectLoop;
	
	DeselectStuff:
		TNT1 A 0 {
			// invoker.EndBackgroundFx();
			A_ZoomFactor(1.0);
			if(CountInv("AugurMag")  >= GetDefaultByType("AugurMag").MaxAmount && CountInv("SupermagTheta")) { A_SetInventory("AugurMag",0); }
			if(CountInv("AugurMag2") >= GetDefaultByType("AugurMag").MaxAmount && CountInv("SupermagTheta")) { A_SetInventory("AugurMag2",0); }
			A_TakeInventory("Gc_AugurXrayPower");
			A_TakeInventory("AugurSelected",1);
			ACS_NamedExecuteAlways("SbarinfoFix",0,1,1,2);
		}
		Goto DeselectLoop;
		
	/*Debug:
		TNT1 A 35 {
			if(CountInv("PowerGunzerking") || GC_Gunslinger)
			{
				A_Log(String.Format("WeapAction %i", invoker.WeapAction));
				A_Log(String.Format("LeftHand %i", invoker.LeftHand));
			}
		}
		Loop;*/
		
	//STRAT (except not really)
		
	ZoomIn:
		//JEFG A 0 A_JumpIf(CheckInventory("PowerGunzerking") || GC_Gunslinger, "No");
		JSFU E 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFU E 0;
		"####" A 0 {
			invoker.WeapAction++;
			A_PlaySound("Augur/Sight1",6,0.8);
			A_ZoomFactor(5.0);
			if(!(CountInv("PowerGunzerking") || GC_Gunslinger)) { invoker.LeftHand = 1; }
			A_GiveInventory("AugurZoomed",1);
			
			if(CountInv("AugurStratActive")) {
				A_GiveInventory("Gc_AugurXrayPower");
			}
			
			if(CountInv("PowerGunzerking") || GC_Gunslinger) {
				A_Overlay(3,"none");
				A_Overlay(-4,"LeftZoomIn");
				A_OverlayFlags(-4,PSPF_MIRROR|PSPF_FLIP,1);
			}
		}
		"####" E 1 A_OverlayOffset(OverlayID(),83,20);
		"####" D 1 A_OverlayOffset(OverlayID(),70,18,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),60,16,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),50,12,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),30,10,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),20,9,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),10,7,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),7,5,WOF_INTERPOLATE);
		JSFS A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFS A 0;
		"####" A 1 A_OverlayOffset(OverlayID(),5,3,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),2,1,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),0,0,WOF_INTERPOLATE);
		"####" A 0 { invoker.LeftHand = 0; invoker.WeapAction--; }
		Goto RightActiveZoomed;
		
	LeftZoomIn:
		JSFG A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG A 0;
		"####" A 1 A_OverlayOffset(OverlayID(),1+invoker.GunzX,1+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),5+invoker.GunzX,5+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),12+invoker.GunzX,12+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),22+invoker.GunzX,22+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),32+invoker.GunzX,32+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),44+invoker.GunzX,44+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),60+invoker.GunzX,60+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),80+invoker.GunzX,80+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),102+invoker.GunzX,102+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 0 A_Overlay(3,"LeftActive");
		Stop;
		
	ZoomOut:
		JSFS A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFS A 0;
		"####" A 0 {
			invoker.WeapAction++;
			A_TakeInventory("Gc_AugurXrayPower");
			A_PlaySound("Augur/Sight2",6,0.8);
			A_ZoomFactor(1.0);
			if(!(CountInv("PowerGunzerking") || GC_Gunslinger)) { invoker.LeftHand = 1; }
			if(CountInv("PowerGunzerking") || GC_Gunslinger) {
				A_Overlay(3,"none");
				A_Overlay(-4,"LeftZoomOut");
				A_OverlayFlags(-4,PSPF_MIRROR|PSPF_FLIP,1);
			}
			
			// invoker.HpViewThroughWalls(false);
		}
		"####" A 1 A_OverlayOffset(OverlayID(),2,1);
		"####" A 1 A_OverlayOffset(OverlayID(),5,3,WOF_INTERPOLATE);
		JSFU A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFU A 0;
		"####" A 1 A_OverlayOffset(OverlayID(),7,5,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),10,7,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),20,9,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),30,10,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),50,12,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),60,16,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),70,18,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),83,20,WOF_INTERPOLATE);
		"####" E 0 {
			if(CountInv("SupermagTheta") && CountInv("AugurMag") < 3) { invoker.ZoomFired = 0; }
			if(!invoker.ZoomFired) { invoker.LeftHand = 0; invoker.WeapAction--; }
			//if(!(CountInv("PowerGunzerking") || GC_Gunslinger) && OverlayID() == -3) { invoker.WeapAction--; }
			A_OverlayOffset(OverlayID(),0,0);
			A_TakeInventory("AugurZoomed",1);
		}
		"####" E 0 {
			If(Invoker.ZoomFired) { Return ResolveState("Cocking"); }
			Return ResolveState(Null);
		}
		Goto RightActive;
		
	LeftZoomOut:
		JSFG E 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG E 0;
		"####" E 1 A_OverlayOffset(OverlayID(),102+invoker.GunzX,102+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),80+invoker.GunzX,80+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),60+invoker.GunzX,60+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),44+invoker.GunzX,44+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),32+invoker.GunzX,32+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),22+invoker.GunzX,22+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),12+invoker.GunzX,12+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),5+invoker.GunzX,5+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),1+invoker.GunzX,1+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 { A_OverlayOffset(OverlayID(),invoker.GunzX,invoker.GunzY,WOF_INTERPOLATE); A_Overlay(3,"LeftActive"); }
		Stop;
	/*No:
		JEFG A 35 {
			invoker.WeapAction++;
			A_Print("\c[white]Do you wanna, like, aim down both rifles at once?\n\c[white]You stupid or something?",3); //I'll probably make it just one rifle later down the line.
			A_PlaySound("Spell/Move",5,0.8);
		}
		JEFG A 0 { invoker.WeapAction--; }
		Goto RightActive;*/

	//RIGHT SIDE
	
	RightActive:
		"####" "#" 0 {
			if(GC_Gunslinger || CountInv("PowerGunzerking")) {
				invoker.GunzX = 35;
				invoker.GunzY = 5;
			} else {
				invoker.GunzX = 0;
				invoker.GunzY = 0;
			}
			
			// Prevent jittering animation -Dino
			if(invoker.GC_DeadCharging) { 
				if(invoker.weapSwitch != 1) { invoker.weapSwitch = 1; }
				Return ResolveState("DeadChargeAnimationOverride"); 
			}
			else { A_OverlayOffset(OverlayID(),invoker.GunzX,invoker.GunzY); }
			Return ResolveState(null);
		}
		JSFG A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG A 0;
		"####" "#" 1;
        "####" "#" 0 {
			//Scope.
			If(!invoker.weapSwitch && !CountInv("GCCantFire") && !invoker.LeftHand &&
			   !invoker.GunzerkShot2 && GetPlayerInput(INPUT_BUTTONS) & BT_RELOAD) {
				Return ResolveState("ZoomIn");
			}
			
			//Fire.
			If(!(GC_Gunslinger || CountInv("PowerGunzerking")) &&
				!invoker.weapSwitch && !CountInv("GCCantFire") && !invoker.LeftHand &&
				((CountInv("HexenCounter") && CountInv("GreenMana") >= 20) || (!CountInv("HexenCounter") && CountInv("AugurAmmo"))) &&
				GetPlayerInput(INPUT_BUTTONS) & BT_ATTACK) {
				Return ResolveState("MainFire");
			}
			
			//Gunzerk fire.
			If((GC_Gunslinger || CountInv("PowerGunzerking")) &&
				!invoker.WeapSwitch && !CountInv("GCCantFire") &&
				((CountInv("HexenCounter") && CountInv("GreenMana") >= 20) || (!CountInv("HexenCounter") && CountInv("AugurAmmo"))) &&
				GetPlayerInput(INPUT_BUTTONS) & BT_ALTATTACK) {
				Return ResolveState("MainFire");
			}
			Return ResolveState(Null);
		}
		Loop;
		
	RightActiveZoomed:
		JSFS A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFS A 0;
		"####" AAAAAAAAAAAAAAAAAAAA 1 {
			If(!invoker.WeapSwitch && GetPlayerInput(INPUT_BUTTONS) & (BT_ZOOM|BT_RELOAD)) { Return ResolveState("ZoomOut"); } //ZoomedReady
			If(!invoker.WeapSwitch && CountInv("AugurStrat") && GetPlayerInput(INPUT_BUTTONS) & BT_ALTATTACK) { Return ResolveState("ActualStratSwitch"); }
			If(!invoker.WeapSwitch && ((CountInv("HexenCounter") && CountInv("GreenMana") >= 20) ||
			  (!CountInv("HexenCounter") && CountInv("AugurAmmo"))) && GetPlayerInput(INPUT_BUTTONS) & BT_ATTACK) { Return ResolveState("ZoomedFire"); }
			Return ResolveState(Null);
		}
		Loop; //Goto ZoomOut;
		
	ActualStratSwitch:
		"####" A 0 {
			A_PlaySound("Augur/Up",1);
			invoker.WeapAction++;
		}
		JSFS A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFS A 0;
		"####" "#" 1 A_OverlayOffset(OverlayID(),1,1,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),2,2,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),6,6,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),10,10,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),16,16,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),21,21,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),22,22,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),23,23,WOF_INTERPOLATE);
		"####" A 3 {
			if(CountInv("AugurStratActive")) {
				A_TakeInventory("AugurStratActive");
				A_TakeInventory("Gc_AugurXrayPower");
			}
			
			else {
				A_GiveInventory("AugurStratActive");
				A_GiveInventory("Gc_AugurXrayPower");
			}
		}
		"####" "#" 1 A_OverlayOffset(OverlayID(),22,22,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),19,19,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),15,15,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),11,11,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),7,7,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),4,4,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),2,2,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),1,1,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),0,0,WOF_INTERPOLATE);
		"####" A 0 {
			invoker.WeapAction--;
		}
		Goto RightActiveZoomed;
		
	//LEFT SIDE
			
	LeftActive:
		TNT1 A 0 {
			if(GC_Gunslinger || CountInv("PowerGunzerking")) {
				A_OverlayFlags(3,PSPF_MIRROR|PSPF_FLIP,1);
			} else {
				A_OverlayFlags(3,PSPF_MIRROR|PSPF_FLIP,0);
			}
			A_OverlayOffset(OverlayID(),invoker.GunzX,invoker.GunzY);
		}
		TNT1 A 0 A_JumpIf((GC_Gunslinger || CountInv("PowerGunzerking")) && !CountInv("AugurZoomed"),3);
		TNT1 A 1;
		TNT1 A 0 {
				If(!invoker.WeapSwitch && !CountInv("GCCantFire") && !invoker.LeftHand &&
				!(GC_Gunslinger || CountInv("PowerGunzerking")) && !CountInv("AugurZoomed") &&
				GetPlayerInput(INPUT_BUTTONS) & BT_ALTATTACK) {
					Return ResolveState("Cast");
				}
				If(!invoker.WeapSwitch && !CountInv("GCCantFire") && !invoker.LeftHand &&
				!(GC_Gunslinger || CountInv("PowerGunzerking")) && GetCvar("GC_Trogdor") &&
				!CountInv("AugurZoomed") && GetPlayerInput(INPUT_BUTTONS) & BT_ZOOM) {
					Return ResolveState("DeadPunchStart");
				}
				Return ResolveState(Null);
		}
		Loop;
		JSFG A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG A 0;
		"####" A 1;
		"####" A 0 A_JumpIf(!invoker.WeapSwitch && !CountInv("GCCantFire") && !CountInv("AugurZoomed") &&
							((CountInv("HexenCounter") && CountInv("GreenMana") >= 20) || (!CountInv("HexenCounter") && CountInv("AugurAmmo"))) &&
							GetPlayerInput(INPUT_BUTTONS) & BT_ATTACK, "MainFire");
        Loop;
	
	//FIRE
	
	MainFire:
		"####" A 0 {
			if((OverlayID() == -3 && CountInv("AugurMag") >= 3) ||
			   (OverlayID() == 3 && CountInv("AugurMag2") >= 3))
			{
				Return ResolveState("Cocking");
			}
			Return ResolveState(Null);
		}
		JSFF A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFF A 0;
		"####" A 0 Bright {
			if((GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == -3) { invoker.GunzerkShot = 1; if(CountInv("SupermagTheta")) { A_TakeInventory("SupermagTimer",0); A_GiveInventory("AugurMag",1); } }
			if((GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == 3) { invoker.GunzerkShot2 = 1; if(CountInv("SupermagTheta")) { A_TakeInventory("SupermagTimer2",0); A_GiveInventory("AugurMag2",1); } }
			if(!(GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == -3) { invoker.LeftHand = 1;   if(CountInv("SupermagTheta")) { A_TakeInventory("SupermagTimer",0); A_GiveInventory("AugurMag",1); } }
			
			A_TakeInventory("AugurAmmo",1,TIF_NOTAKEINFINITE); A_TakeInventory("GreenMana",15,TIF_NOTAKEINFINITE);
			
			if(!CountInv("AugurStratActive")) { GC_BaseFunctions.GC_LaserSpawn(invoker.owner,"AugurProjectile",null, "AugurImpactGroup", 40.0, OverlayID() * -2, -5); }
			else 							  { GC_BaseFunctions.GC_LaserSpawn(invoker.owner,"AugurWallhack",null, "AugurImpactGroup", 40.0, OverlayID() * -2, -5); A_TakeInventory("AugurAmmo",1); A_TakeInventory("GreenMana",15); }
			
			/*
			if(!CountInv("AugurStratActive")) { A_FireProjectile("AugurProjectile",0,1,OverlayID() == -3 ? 9 : -9,-2); }
			else 							  { A_FireProjectile("AugurWallhack",  0,1,OverlayID() == -3 ? 9 : -9,-2); }
			*/
			
			A_AlertMonsters();
			A_ChangeVelocity (Cos(Pitch) * -32
				* (CountInv("PowerDeadmaker") ? 0.1 : 1.0) //Deadmaker modifier.
				* (CountInv("PowerSuitToken") ? 0.1 : 1.0) //Powersuit modifier.
				* GetCvar("GC_PhysicalRecoil"), 		 	 //Recoil nullifier.
				0,		//Nobody likes you, Y velocity.
				Sin(Pitch) * 32
				* (CountInv("PowerDeadmaker") ? 0.1 : 1.0)
				* (CountInv("PowerSuitToken") ? 0.1 : 1.0)
				* GetCvar("GC_PhysicalRecoil"), CVF_RELATIVE);
			A_SetBlend("2197ff",0.3,25);
			if(GetCvar("GC_QuakeRecoil")) { A_QuakeEx(9,4,4,35,0,128,"none",QF_SCALEDOWN|QF_WAVE,1.0,1.0,4.0); }
			if(GetCvar("GC_QuakeRecoil")) { A_QuakeEx(9,4,4,35,0,128,"none",QF_SCALEDOWN); }
			if(GetCvar("GC_Scatman")) { A_PlaySound("Augur/Scatman",7,0.85); }
			A_PlaySound("Augur/Fire",1,0.85);
			A_PlaySound("Augur/Add",5,0.85);
			invoker.WeapAction++;
		}
		"####" A 1 Bright { A_OverlayOffset(OverlayID(),7+invoker.GunzX,5+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? -0.25 : 0.25) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.995); } }
		"####" B 1 Bright { A_OverlayOffset(OverlayID(),16+invoker.GunzX,10+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-1.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); 	A_SetAngle(Angle + (OverlayID() == -3 ? -0.75 : 0.75) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.99); } }
		"####" C 1 Bright { A_OverlayOffset(OverlayID(),22+invoker.GunzX,11+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-2.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? -1.25 : 1.25) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.985); } }
		"####" D 1 Bright { A_OverlayOffset(OverlayID(),39+invoker.GunzX,5+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-4.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? -2.25 : 2.25) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.98); } }
		"####" E 1 Bright { A_OverlayOffset(OverlayID(),54+invoker.GunzX,-6+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-2.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? -1.25 : 1.25) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.975); } }
		"####" F 1 Bright { A_OverlayOffset(OverlayID(),55+invoker.GunzX,-7+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-1.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? -0.75 : 0.75) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.97); } }
		"####" G 1 Bright { A_OverlayOffset(OverlayID(),56+invoker.GunzX,-8+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch-1.0*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); 	A_SetAngle(Angle + (OverlayID() == -3 ? -0.5 : 0.5) * GetCvar("GC_WeaponRecoil"));	 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.965); } }
		JSFG F 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG F 0;
		"####" F 1 		{ A_OverlayOffset(OverlayID(),56.25+invoker.GunzX,-8.25+invoker.GunzY,WOF_INTERPOLATE); A_SetPitch(Pitch-0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); 	A_SetAngle(Angle + (OverlayID() == -3 ? -0.25 : 0.25) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.96); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),56.5+invoker.GunzX,-8.5+invoker.GunzY,WOF_INTERPOLATE);	A_SetPitch(Pitch-0.25*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); 	A_SetAngle(Angle + (OverlayID() == -3 ? -0.125 : 0.125) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.955); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),56.75+invoker.GunzX,-8.75+invoker.GunzY,WOF_INTERPOLATE); A_SetPitch(Pitch-0.1*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); 	A_SetAngle(Angle + (OverlayID() == -3 ? -0.05 : 0.05) * GetCvar("GC_WeaponRecoil")); }
		"####" A 0 { if(!CountInv("MastersOfPain")) { A_Overlay(666,"OneStationEarly"); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),57+invoker.GunzX,-9+invoker.GunzY,WOF_INTERPOLATE);	}	
		"####" F 1 		{ A_OverlayOffset(OverlayID(),57.25+invoker.GunzX,-8.75+invoker.GunzY,WOF_INTERPOLATE); A_SetPitch(Pitch+0.1*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.5 : -0.5) * GetCvar("GC_WeaponRecoil"));		if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.96); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),57.5+invoker.GunzX,-8.5+invoker.GunzY,WOF_INTERPOLATE);   A_SetPitch(Pitch+0.25*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.125 : -0.125) * GetCvar("GC_WeaponRecoil"));	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.965); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),57.75+invoker.GunzX,-8.25+invoker.GunzY,WOF_INTERPOLATE); A_SetPitch(Pitch+0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.25 : -0.25) * GetCvar("GC_WeaponRecoil"));	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.97);} }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),58+invoker.GunzX,-8+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+0.75*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.375 : -0.375) * GetCvar("GC_WeaponRecoil"));	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.975); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),59+invoker.GunzX,-7+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+0.75*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.375 : -0.375) * GetCvar("GC_WeaponRecoil"));	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.98); } }
		"####" F 1 		{ A_OverlayOffset(OverlayID(),61+invoker.GunzX,-4+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+1.25*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.625 : -0.625) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.9825); } }
		"####" E 1 		{ A_OverlayOffset(OverlayID(),64+invoker.GunzX,-1+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+1.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.75 : -0.75) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.985); } }
		"####" E 1 		{ A_OverlayOffset(OverlayID(),62+invoker.GunzX,5+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+2.25*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 1.25 : -1.25) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.9875); } }
		"####" D 1 		{ A_OverlayOffset(OverlayID(),61+invoker.GunzX,8+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+2.0*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 1.0 : -1.0) * GetCvar("GC_WeaponRecoil"));		if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.99); } }
		"####" D 1 		{ A_OverlayOffset(OverlayID(),54+invoker.GunzX,11+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+1.75*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.75 : -0.75) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.9925); } }
		"####" C 1 		{ A_OverlayOffset(OverlayID(),48+invoker.GunzX,14+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+1.25*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.5 : -0.5) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.995); } }
		"####" C 1		{ A_OverlayOffset(OverlayID(),48+invoker.GunzX,14+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+1.0*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.375 : -0.375) * GetCvar("GC_WeaponRecoil")); 	if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(0.9975); } }
		"####" C 1		{ A_OverlayOffset(OverlayID(),40+invoker.GunzX,13+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+0.75*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE);	A_SetAngle(Angle + (OverlayID() == -3 ? 0.35 : -0.35) * GetCvar("GC_WeaponRecoil")); 		if(GetCvar("GC_ZoomRecoil")) { A_ZoomFactor(1.0); } }
		"####" B 1		{ A_OverlayOffset(OverlayID(),32+invoker.GunzX,10+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); 	A_SetAngle(Angle + (OverlayID() == -3 ? 0.125 : -0.125) * GetCvar("GC_WeaponRecoil")); }
		"####" B 1		{ A_OverlayOffset(OverlayID(),20+invoker.GunzX,7+invoker.GunzY,WOF_INTERPOLATE);		A_SetPitch(Pitch+0.25*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" B 1 		{ A_OverlayOffset(OverlayID(),8+invoker.GunzX,4+invoker.GunzY,WOF_INTERPOLATE); }
		"####" A 1 		{ A_OverlayOffset(OverlayID(),6+invoker.GunzX,3+invoker.GunzY,WOF_INTERPOLATE); }
		"####" A 1 		{ A_OverlayOffset(OverlayID(),3+invoker.GunzX,2+invoker.GunzY,WOF_INTERPOLATE); }
		"####" A 1 		{ A_OverlayOffset(OverlayID(),1+invoker.GunzX,1+invoker.GunzY,WOF_INTERPOLATE); }
		"####" A 1 		{ A_OverlayOffset(OverlayID(),invoker.GunzX,invoker.GunzY+invoker.GunzY,WOF_INTERPOLATE); }
		"####" A 0 {
			if(!(GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == -3 && CountInv("SupermagTheta") && CountInv("AugurMag") < 3) { invoker.LeftHand = 0; invoker.WeapAction--; Return ResolveState("RightActive"); }
			if((GC_Gunslinger  || CountInv("PowerGunzerking")) && OverlayID() == -3 && CountInv("SupermagTheta") && CountInv("AugurMag") < 3) { invoker.GunzerkShot = 0; invoker.WeapAction--; Return ResolveState("RightActive"); }
			if((GC_Gunslinger  || CountInv("PowerGunzerking")) && OverlayID() ==  3 && CountInv("SupermagTheta") && CountInv("AugurMag2") < 3) { invoker.GunzerkShot2 = 0; invoker.WeapAction--; Return ResolveState("LeftActive"); }
			Return ResolveState(Null);
		}
		Goto Cocking;
	OneStationEarly:
		TNT1 AAAAAAAAAAAAAAA 1 A_WeaponReady(WRF_NOFIRE);
		Stop;
	Cocking:
		JSFG A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG A 0;
		"####" A 0 { if(!(CountInv("PowerGunzerking") || GC_Gunslinger) && OverlayID() == -3) { A_Overlay(2,"HandjobIn"); } }
		"####" A 1;
		"####" A 1 A_OverlayOffset(OverlayID(),1+invoker.GunzX,1+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),3+invoker.GunzX,3+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),6+invoker.GunzX,6+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),8+invoker.GunzX,8+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),10+invoker.GunzX,10+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),11+invoker.GunzX,11+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),12+invoker.GunzX,12+invoker.GunzY,WOF_INTERPOLATE);
		
		JSFG A 0 A_JumpIf(!CountInv("AugurStratActive"),9);	
		JSFG A 0 A_JumpIf((CountInv("PowerGunzerking") || GC_Gunslinger) &&
						 ((invoker.GunzerkShot && OverlayID() == -3) || (invoker.GunzerkShot2 && OverlayID() == 3)),16);
		JSOR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitToken"),15);
		JSDR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitDraugh"),14);
		JSNR A 0 A_JumpIf(CountInv("PowerDeadmaker"),13);
		JSCR A 0 A_JumpIf(CountInv("PowerSuitToken"),12);
		JSUR A 0 A_JumpIf(CountInv("PowerSuitProtect"),11);
		JSYR A 0 A_JumpIf(CountInv("PowerSuitDraugh"),10);
		JSFR A 0 A_Jump(256,9);
		JEFG A 0 A_JumpIf((CountInv("PowerGunzerking") || GC_Gunslinger) &&
						 ((invoker.GunzerkShot && OverlayID() == -3) || (invoker.GunzerkShot2 && OverlayID() == 3)),8);
		JEOR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitToken"),7);
		JEDR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitDraugh"),6);
		JENR A 0 A_JumpIf(CountInv("PowerDeadmaker"),5);
		JECR A 0 A_JumpIf(CountInv("PowerSuitToken"),4);
		JEUR A 0 A_JumpIf(CountInv("PowerSuitProtect"),3);
		JEYR A 0 A_JumpIf(CountInv("PowerSuitDraugh"),2);
		JEFR A 0;
		"####" A 4 A_OverlayOffset(OverlayID(),13+invoker.GunzX,13+invoker.GunzY,WOF_INTERPOLATE);
		
		"####" A 0 A_PlaySound("Augur/BoltIn",6,0.6);
		"####" A 1 A_OverlayOffset(OverlayID(),13+invoker.GunzX,14+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),16+invoker.GunzX,16+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),19+invoker.GunzX,19+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),23+invoker.GunzX,23+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),29+invoker.GunzX,29+invoker.GunzY,WOF_INTERPOLATE);
		
		JEFG D 0;
		"####" D 1 A_OverlayOffset(OverlayID(),35+invoker.GunzX,35+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),38+invoker.GunzX,38+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),41+invoker.GunzX,41+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),44+invoker.GunzX,44+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),46+invoker.GunzX,46+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),48+invoker.GunzX,48+invoker.GunzY,WOF_INTERPOLATE);
		"####" F 1 A_OverlayOffset(OverlayID(),50+invoker.GunzX,50+invoker.GunzY,WOF_INTERPOLATE);
		"####" F 1 A_OverlayOffset(OverlayID(),51+invoker.GunzX,51+invoker.GunzY,WOF_INTERPOLATE);
		
		"####" F 0 A_JumpIf(CountInv("SupermagTheta"),3);
		"####" F 12 {
			A_OverlayOffset(OverlayID(),52+invoker.GunzX,52+invoker.GunzY,WOF_INTERPOLATE);
			if(OverlayID() == -3) { A_FireProjectile("AugurCasingSpawner",0,0,14,-15,FPF_NOAUTOAIM); }
			if(OverlayID() == 3)  { A_FireProjectile("AugurCasingSpawner",0,0,-14,-15,FPF_NOAUTOAIM); }
		}
		"####" F 0 A_Jump(256,3);
	DeployDatShell:
		"####" F 6 {
			A_OverlayOffset(OverlayID(),52+invoker.GunzX,52+invoker.GunzY,WOF_INTERPOLATE);
		}
		"####" F 0 {
			if(CountInv("SupermagTheta")) {
				if(OverlayID() == 3 && CountInv("AugurMag2")) { A_TakeInventory("AugurMag2",1); A_FireProjectile("AugurCasingSpawner",0,0,-14,-15,FPF_NOAUTOAIM); Return ResolveState("DeployDatShell"); }
				if(OverlayID() == -3 && CountInv("AugurMag")) { A_TakeInventory("AugurMag",1);  A_FireProjectile("AugurCasingSpawner",0,0,14,-15,FPF_NOAUTOAIM); Return ResolveState("DeployDatShell"); }
			}
			Return ResolveState(Null);
		}
		"####" F 0 A_PlaySound("Augur/BoltOut",6,0.5);
		"####" F 1 A_OverlayOffset(OverlayID(),51+invoker.GunzX,51+invoker.GunzY,WOF_INTERPOLATE);
		"####" F 1 A_OverlayOffset(OverlayID(),50+invoker.GunzX,50+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),48+invoker.GunzX,48+invoker.GunzY,WOF_INTERPOLATE);
		"####" E 1 A_OverlayOffset(OverlayID(),46+invoker.GunzX,46+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),44+invoker.GunzX,44+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),41+invoker.GunzX,41+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),38+invoker.GunzX,38+invoker.GunzY,WOF_INTERPOLATE);
		"####" D 1 A_OverlayOffset(OverlayID(),35+invoker.GunzX,35+invoker.GunzY,WOF_INTERPOLATE);
		
		JSFG A 0 A_JumpIf(!CountInv("AugurStratActive"),9);	
		JSFG A 0 A_JumpIf((CountInv("PowerGunzerking") || GC_Gunslinger) &&
						 ((invoker.GunzerkShot && OverlayID() == -3) || (invoker.GunzerkShot2 && OverlayID() == 3)),16);
		JSOR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitToken"),15);
		JSDR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitDraugh"),14);
		JSNR A 0 A_JumpIf(CountInv("PowerDeadmaker"),13);
		JSCR A 0 A_JumpIf(CountInv("PowerSuitToken"),12);
		JSUR A 0 A_JumpIf(CountInv("PowerSuitProtect"),11);
		JSYR A 0 A_JumpIf(CountInv("PowerSuitDraugh"),10);
		JSFR A 0 A_Jump(256,9);
		JEFG A 0 A_JumpIf((CountInv("PowerGunzerking") || GC_Gunslinger) &&
						 ((invoker.GunzerkShot && OverlayID() == -3) || (invoker.GunzerkShot2 && OverlayID() == 3)),8);
		JEOR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitToken"),7);
		JEDR C 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitDraugh"),6);
		JENR A 0 A_JumpIf(CountInv("PowerDeadmaker"),5);
		JECR A 0 A_JumpIf(CountInv("PowerSuitToken"),4);
		JEUR A 0 A_JumpIf(CountInv("PowerSuitProtect"),3);
		JEYR A 0 A_JumpIf(CountInv("PowerSuitDraugh"),2);
		JEFR A 0;
		"####" C 1 A_OverlayOffset(OverlayID(),29+invoker.GunzX,29+invoker.GunzY,WOF_INTERPOLATE);
		"####" C 1 A_OverlayOffset(OverlayID(),23+invoker.GunzX,23+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),19+invoker.GunzX,19+invoker.GunzY,WOF_INTERPOLATE);
		"####" B 1 A_OverlayOffset(OverlayID(),16+invoker.GunzX,16+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),13+invoker.GunzX,14+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 4 A_OverlayOffset(OverlayID(),13+invoker.GunzX,13+invoker.GunzY,WOF_INTERPOLATE);
		
		JSFG A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG A 0;
		"####" A 0 { if(!(CountInv("PowerGunzerking") || GC_Gunslinger) && OverlayID() == -3) { A_Overlay(2,"HandjobOut"); } }
		"####" A 1 A_OverlayOffset(OverlayID(),12+invoker.GunzX,12+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),11+invoker.GunzX,11+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),10+invoker.GunzX,10+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),8+invoker.GunzX,8+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),6+invoker.GunzX,6+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),3+invoker.GunzX,3+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 1 A_OverlayOffset(OverlayID(),1+invoker.GunzX,1+invoker.GunzY,WOF_INTERPOLATE);
		"####" A 4 A_OverlayOffset(OverlayID(),invoker.GunzX,invoker.GunzY,WOF_INTERPOLATE);
		"####" A 0 {
			invoker.ZoomFired = 0;
			if(!(GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == -3) { invoker.LeftHand = 0; }
			if((GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == -3) { invoker.GunzerkShot = 0; }
			if((GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == 3) { invoker.GunzerkShot2 = 0; }
			A_OverlayOffset(OverlayID(), invoker.GunzX, invoker.GunzY, WOF_INTERPOLATE);
			invoker.WeapAction--;
			A_ZoomFactor(1.0);
			If(OverlayID() == -3) { invoker.LeftHand = 0; }
		}
		"####" A 0 A_JumpIf(OverlayID() == 3,"LeftActive");
		Goto RightActive;

	ZoomedFire:
		"####" A 0 {
			if(CountInv("SupermagTheta") && CountInv("AugurMag") >= 3)
			{
				Return ResolveState("ZoomOut");
			}
			Return ResolveState(Null);
		}
		JSFS A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFS A 0;
		"####" A 0 Bright {
			if(CountInv("SupermagTheta")) { A_TakeInventory("SupermagTimer",0); A_GiveInventory("AugurMag",1); }
			if((GC_Gunslinger || CountInv("PowerGunzerking")) && OverlayID() == -3) { invoker.GunzerkShot = 1; } //So you won't suddenly get a hand popping up while cocking it with gunzerk on.
			
			A_TakeInventory("AugurAmmo",1,TIF_NOTAKEINFINITE); A_TakeInventory("GreenMana",15,TIF_NOTAKEINFINITE);
			
			if(!CountInv("AugurStratActive")) { GC_BaseFunctions.GC_LaserSpawn(invoker.owner,"AugurProjectile",null, "AugurImpactGroup", 40.0, 0.0, -5); }
			else 							  { GC_BaseFunctions.GC_LaserSpawn(invoker.owner,"AugurWallhack",null, "AugurImpactGroup", 40.0, 0.0, -5); A_TakeInventory("AugurAmmo",1,TIF_NOTAKEINFINITE); A_TakeInventory("GreenMana",15,TIF_NOTAKEINFINITE); }
			
			/*
			if(!CountInv("AugurStratActive")) { A_FireProjectile("AugurProjectile",0,1,0,-2); }
			else							  { A_FireProjectile("AugurWallhack",0,1,0,-2); }
			*/
			
			A_AlertMonsters();
			A_SetBlend("2197ff",0.3,25);
			if(GetCvar("GC_QuakeRecoil")) { A_QuakeEx(9,4,4,35,0,128,"none",QF_SCALEDOWN|QF_WAVE,1.0,1.0,4.0); }
			if(GetCvar("GC_QuakeRecoil")) { A_QuakeEx(9,4,4,35,0,128,"none",QF_SCALEDOWN); }
			A_PlaySound("Augur/Fire",1,0.85);
			A_PlaySound("Augur/Add",5,0.85);
			if(GetCvar("GC_Scatman")) { A_PlaySound("Augur/Scatman",7,0.85); }
			invoker.ZoomFired = 1;
			invoker.WeapAction++;
		}
		"####" B 1 Bright { A_OverlayOffset(OverlayID(),frandom(2.0,-2.0),frandom(2.0,-2.0),WOF_INTERPOLATE); 	A_SetPitch(Pitch-0.1*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" B 1 Bright { A_OverlayOffset(OverlayID(),frandom(6.0,-6.0),frandom(6.0,-6.0),WOF_INTERPOLATE);	A_SetPitch(Pitch-0.2*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" C 1 Bright { A_OverlayOffset(OverlayID(),frandom(12.0,-12.0),random(12.0,-12.0),WOF_INTERPOLATE);  A_SetPitch(Pitch-0.3*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" C 1 Bright { A_OverlayOffset(OverlayID(),frandom(12.0,-12.0),random(12.0,-12.0),WOF_INTERPOLATE);  A_SetPitch(Pitch-0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" D 1 Bright { A_OverlayOffset(OverlayID(),frandom(16.0,-16.0),frandom(16.0,-16.0),WOF_INTERPOLATE); A_SetPitch(Pitch-1.0*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" D 1 Bright { A_OverlayOffset(OverlayID(),frandom(16.0,-16.0),frandom(16.0,-16.0),WOF_INTERPOLATE); A_SetPitch(Pitch-0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" D 1 Bright { A_OverlayOffset(OverlayID(),frandom(16.0,-16.0),frandom(16.0,-16.0),WOF_INTERPOLATE); A_SetPitch(Pitch-0.1*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" D 1 Bright   A_OverlayOffset(OverlayID(),frandom(16.0,-16.0),frandom(16.0,-16.0),WOF_INTERPOLATE);
		"####" D 1 Bright { A_OverlayOffset(OverlayID(),frandom(16.0,-16.0),frandom(16.0,-16.0),WOF_INTERPOLATE); A_SetPitch(Pitch+0.1*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" D 1 Bright { A_OverlayOffset(OverlayID(),frandom(16.0,-16.0),frandom(16.0,-16.0),WOF_INTERPOLATE); A_SetPitch(Pitch+0.2*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" C 1 Bright { A_OverlayOffset(OverlayID(),frandom(12.0,-12.0),frandom(12.0,-12.0),WOF_INTERPOLATE); A_SetPitch(Pitch+0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" C 1 Bright { A_OverlayOffset(OverlayID(),frandom(12.0,-12.0),frandom(12.0,-12.0),WOF_INTERPOLATE); A_SetPitch(Pitch+1.0*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" B 1 Bright { A_OverlayOffset(OverlayID(),frandom(6.0,-6.0),frandom(6.0,-6.0),WOF_INTERPOLATE);     A_SetPitch(Pitch+0.5*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" B 1 Bright { A_OverlayOffset(OverlayID(),frandom(2.0,-2.0),frandom(2.0,-2.0),WOF_INTERPOLATE);	A_SetPitch(Pitch+0.3*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" A 1 		{ A_OverlayOffset(OverlayID(),0,0,WOF_INTERPOLATE); 					 				A_SetPitch(Pitch+0.1*GetCvar("GC_WeaponRecoil"),SPF_INTERPOLATE); }
		"####" A 14;
		"####" A 0 {
			invoker.WeapAction--;
			if(CountInv("SupermagTheta") && CountInv("AugurMag") < 3) { Return ResolveState("RightActiveZoomed"); }
			Return ResolveState(Null);
		}
		Goto ZoomOut;
		
	HandjobIn:
		CYOH L 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitToken"),7);
		CYDH L 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitDraugh"),6);
		CYNH L 0 A_JumpIf(CountInv("PowerDeadmaker"),5);
		CYCH L 0 A_JumpIf(CountInv("PowerSuitToken"),4); //Had to define new hand for it or else it gets messed up offset-wise while being flipped.
		CYUH L 0 A_JumpIf(CountInv("PowerSuitProtect"),3);
		CYYH L 0 A_JumpIf(CountInv("PowerSuitDraugh"),2);
		CYGH L 0;
		"####" "#" 1 A_OverlayOffset(OverlayID(),-54+invoker.GunzX,156+invoker.GunzY);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-45+invoker.GunzX,135+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-24+invoker.GunzX,124+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-8+invoker.GunzX,114+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),14+invoker.GunzX,106+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),35+invoker.GunzX,99+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),50+invoker.GunzX,100+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),56+invoker.GunzX,108+invoker.GunzY,WOF_INTERPOLATE);
		Stop;
	HandjobOut:
		CYOH L 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitToken"),7);
		CYDH L 0 A_JumpIf(CountInv("PowerDeadmaker") && CountInv("PowerSuitDraugh"),6);
		CYNH L 0 A_JumpIf(CountInv("PowerDeadmaker"),5);
		CYCH L 0 A_JumpIf(CountInv("PowerSuitToken"),4);
		CYUH L 0 A_JumpIf(CountInv("PowerSuitProtect"),3);
		CYYH L 0 A_JumpIf(CountInv("PowerSuitDraugh"),2);
		CYGH L 0;
		"####" "#" 1 A_OverlayOffset(OverlayID(),56+invoker.GunzX,108+invoker.GunzY);
		"####" "#" 1 A_OverlayOffset(OverlayID(),50+invoker.GunzX,100+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),35+invoker.GunzX,99+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),14+invoker.GunzX,106+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-8+invoker.GunzX,114+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-24+invoker.GunzX,124+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-42+invoker.GunzX,135+invoker.GunzY,WOF_INTERPOLATE);
		"####" "#" 1 A_OverlayOffset(OverlayID(),-54+invoker.GunzX,156+invoker.GunzY,WOF_INTERPOLATE);
		Stop;
		
	// Dino's dummy animation
	DeadChargeAnimationOverride:
		JSFG A 0 A_JumpIf(CountInv("AugurStratActive"),2);
		JEFG A 0;
		"####" "#" 1 {
			if(!invoker.weapSwitch) { Return ResolveState("RightActive"); }
			Return ResolveState(null);
		}
		Loop;
	}
}

#endregion
